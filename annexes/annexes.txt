1. faire apparaitre juste victor et amaury à l'ensg

.bindPopup('Hé Amaury, il est 9h30 et y'a personne dans mon cours')
.bindPopup('Merde, je pensais qu'ils étaient tous avec toi, j'ai personne non plus')
.bindPopup('Va falloir aller les chercher...tu peux t'en occuper ? Je dois 
être à l'école à 11h30 pour acheter mes billets du Hellfest')
.bindPopup('J'ai qu'ça à faire de toute façon. Je ne sais juste pas par où commencer')
.bindPopup('Regarde Amaury, on dirait qu'il y a Tristan devant le portail de sécurité de l'ENSG, il devrait pouvoir t'aider dans ta quête')

________________________________________________________________________
2. Faire apparaitre Tristan Fillon au niveau du portail de sécurité

.bindPopup('Salut Tristan, il n'y a pas cours ce matin, personne n'est venu. Tu pourrais m'aider à trouver tout le monde ?')
.bindPopup('Oui, bien sûr ! On peut commencer par aller chez Amélie, elle habite à Voisins-le-bretonneux')
.bindPopup('Ma parole, on ne peut pas y aller à pied! Je vais essayer de voir avec Jeanine si elle peut nous preter le mignibus : elle travaille dans l'ENSG')

________________________________________________________________________
2.a Faire apparaitre Jeanine dans l'ensg et deplacer Amaury a cote de Jeanine si possible

faire une popup où la personne doit ecrire bonjour
.bindPopup('Bonjour Jeanine ! Il nous faut le mignibus en urgence !')
.bindPopup('Il n'a presque plus de combustign ! Je vous le passe mais j'espère que vous n'allez pas faire le tour du monde')

________________________________________________________________________
2.b Faire apparaitre le mignibus dans l'emplacement du bus

.bindPopup('Allez, monte dans le master, c'est parti pour Voisins-le-bretonneux!')
________________________________________________________________________
3. Enlever Tristan Fillon, Amaury et Victor de la carte
4. Mettre Tristan Fillon et Amaury dans le bus
5. Faire apparaitre Amelie 

Conversation du bus
var $message = document.getElementById("message");
OK $message.innerHTML = "C'est beau comme village, tu ne trouves pas Tristan ?"
OK $message.innerHTML = "Non, pas vraiment, je prefère la Guyane."
OK $message.innerHTML = "Je vais voir Amelie pour qu'elle vienne avec nous."

.bindPopup('Je suis désolé, mais je ne bourgerai pas sans petit déjeuner!')
.bindPopup('J'ai laissé une carotte au château de Versailles, si on me la ramène, je viens avec vous!')

 ----------------------------------> dire plutot "Va me cherche ma carotte au chateau de versailles...."

________________________________________________________________________
6. Faire apparaitre une carotte au chateau de Versailles
7. quand le joueur clique dessus, la faire disparaitre et la mettre dans l'inventaire (groupe d'objet ?)

.bindPopup('Ah merci! On peut y aller! Allons chercher Clément, il habite à MontBrison!')
________________________________________________________________________
8. Faire disparaitre Amelie, la mettre dans le bus, Afficher Clement 

.bindPopup('Coucou, je viens seulement si vous répondez à ma question <form action="page.php" method="get"> <input type="submit" name="envoi" value="OK">Que signifie "fouilla bel belet?"<label>xxxxxx<input type="radio" name="ouinon" value="1"></label><label>xxxxxx<input type="radio" name="ouinon" value="0"></label></form>');

Indice donné dans la discussion (une pomme de pin en image)

var valeur = document.querySelector('input[name="ouinon"]:checked').value;
if (valeur == 1){
    .bindPopup('Bravo! La brise est trop forte ici, changeons de mont! Allons à Montaigu, un lapin s'y cache.')
    OK $message.innerHTML = "Wow, PRENOM UTILISATEUR est trop fort, on va vite pouvoir faire du WEB" (Amaury qui parle)
    OK $message.innerHTML = "C'est génial ! J'ai si envie d'avoir de nouvelles connaissances" (Amelie qui parle)
}
else (){
    ///trouver ce qu'on fait si l'utilisateur répond mal : on ouvre un autre popup ? ou on affiche un message a la suite de la popup ?
    OK $message.innerHTML = "Haha, il s'est trompé. C'est pas comme ça qu'on va récupérer tout le monde" (Amaury qui parle)
    OK $message.innerHTML = "Mince, nous qui avions si envie de faire du WEB" (Amelie qui parle)
}

________________________________________________________________________
10. Faire disparaitre Clement, le mettre dans le bus, afficher Tancrede
          
.bindPopup('Bonjour, il faut que tu m'aides! Quelle est la meilleure recette du coin? <form><input type="text" name="manger"><input type="submit" name="envoi" value="OK"></form>')
OK $message.innerHTML = "C'est pas du tout une recette du coin ca !" (Clement qui parle)

INDICE sur le PREFOU

.bindPopup('MMMM, ca à l'air vraiment très bon!  En route vers l'Est, Antoine, le beau gosse, nous attend!')

________________________________________________________________________
11. Disparition de Tancrede, Tancrede dans le bus, apparition d'Antoine le beau gosse

.bindPopup('Enfin ! Ca fait 1h que je vous attends! Je ne monte que si vous répondez à ma question: Tu préfères ton père ou ta mère?<form><label>ta mère<input type="radio" name="ouinon" value="1"></label><label>ton père<input type="radio" name="ouinon" value="0"></label><input type="submit" name="envoi" value="OK"></form>')
.bindPopup('On peut aller chez Kevin, c'est pas très très loin !')
________________________________________________________________________
12. Disparition de Antoine, Antoine dans le bus, apparition de Kevin

Indice mettre des coeurs dans la discussion

.bindPopup('Oh dingue, vous êtes venus! Petite question avant de partir, que veut dire 'mi aim a ou'?<form><label>ta mère<input type="radio" name="ouinon" value="1"></label><label>ton père<input type="radio" name="ouinon" value="0"></label><input type="submit" name="envoi" value="OK"></form>')
if (valeur == 1){
    OK $message.innerHTML = "miaou miaou" (Amaury qui parle)
    OK $message.innerHTML = "Je crois qu'on a perdu Amaury" (Amelie qui parle)
    OK $message.innerHTML = "miaou miaou" (Amaury qui parle)
}
else (){
    ///trouver ce qu'on fait si l'utilisateur répond mal : on ouvre un autre popup ? ou on affiche un message a la suite de la popup ?
    OK $message.innerHTML = "miaou miaou" (Amaury qui parle)
    OK $message.innerHTML = "Je crois qu'on a perdu Amaury" (Amelie qui parle)
    OK $message.innerHTML = "miaou miaou" (Amaury qui parle)
}

.bindPopup('Bien joué, on peut passer prendre Léa, elle habite sur le chemin pour rentrer!')

________________________________________________________________________
13. Disparition de Kevin, Kevin dans le bus, apparition d'Lea L 

.bindPopup('Salut, sauras-tu répondre à ma question: Que veut dire 'Avec toute cette drach, in a pas fini d'marcher dins l'berdoule'?<form><label>ta mère<input type="radio" name="ouinon" value="1"></label><label>ton père<input type="radio" name="ouinon" value="0"></label><input type="submit" name="envoi" value="OK"></form>')
if (valeur == 1){
    .bindPopup('Bravo, allons cherchez Vincent et Félix dans les montagnes !')
    .bindPopup('Commencons par Vincent qui habite à Thonon-les-Bains !')}
else (){
    ///trouver ce qu'on fait si l'utilisateur répond mal : on ouvre un autre popup ? ou on affiche un message a la suite de la popup ?
}
Faire des propositions ou réduire la question à "que veut dire: l'berdoule"

________________________________________________________________________
14. Disparition de Lea L, Lea L dans le bus, apparition de Vincent 

.bindPopup('Oh! Bienvenu dans cette belle région! Connaissez-vous le grand lac de celle-ci?<form><label>ta mère<input type="radio" name="ouinon" value="non"></label><label>ton père<input type="radio" name="ouinon" value="oui"></label><input type="submit" name="envoi" value="OK"></form>')

var valeur = document.querySelector('input[name="ouinon"]:checked').value;
if (valeur == 1){
    .bindPopup('Bien joué, c'est le Lac Léman, situé entre la France et la Suisse. Passons chez Félix, il n'est pas très loin !')
    .bindPopup('Dircetion les Alpes des plaines chez Felix ! Ilhabite près de Chambéry')
    OK $message.innerHTML = "J'espère qu'on verra Jean Luc !" (Kevin qui parle)
}
else (){
    ///trouver ce qu'on fait si l'utilisateur répond mal : on ouvre un autre popup ? ou on affiche un message a la suite de la popup ?
    OK $message.innerHTML = "Il faut lui donner un indice, non ?" (Tancrede qui parle)
    OK $message.innerHTML = "Non, la question est beaucoup trop facile !" (Antoine qui parle)
}

________________________________________________________________________
15. Disparition de Vincent, Vincent dans le bus, apparition de Maman Felix 

OK $message.innerHTML = "Ha nous voila enfin chez Félix ! Je ne le vois pas, je vais aller voir sa mère pour lui demander où est Félix." (vincent qui parle)
.bindPopup('Quoi? Félix n'est pas à l'école? Il n'est pas rentré hier soir, il faisait soirée chez Baptiste, le vilain!')

OK $message.innerHTML = "Baptiste habite loin! Il vaut mieux passer chez Mélodie avant, ca fera moins de détour. Elle habite près de Lyon!" (vincent qui parle)

________________________________________________________________________
16. Disparition de Maman felix, apparition de Melodie

.bindPopup('Je ne peux pas partir, j'ai perdu mes clés au parc de la Tête d'Or, peux-tu me les ramener?')
<!-- Ramener des clés  -->

.bindPopup('Merci, on peut y aller je suis prête! Il manque Baptiste !')
.bindPopup('Baptiste habite dans le 12ème arrondissement de Paris !')
OK $message.innerHTML = "Allons chez Baptiste !" (Antoine qui parle)

________________________________________________________________________
17. Disparition de Melodie, Melodie dans le bus, apparition de Felix et Baptiste

.bindPopup('Oh non, vous nous réveillez!') (baptiste)
.bindPopup('Bon, on se dépêche!') (felix)
.bindPopup('Oula ! Moi, pour me lever, j'ai besoin d'une carotte.') (baptiste)
.bindPopup('Il y a un champ de carotte non loin de la Bastille, pouvez-vous m'en ramener une?') (baptiste)
<!-- Ramener une carotte  -->
.bindPopup('Merci, on peut y aller! Ilona n'est pas avec vous ? Il faut aller au Sud de Metz pour la trouver !')

________________________________________________________________________
18. Disparition de Felix, Baptiste, puis Felix, Baptiste dans le bus, apparition de Felix et Baptiste

.bindPopup('Olala je suis grave en retard, attendez je mange ma purée de carotte et on y va! ')
.bindPopup('Mince, il me manque une mirabelle pour le dessert, il y en a dans la forêt juste à côté!')

<!-- Ramener une mirabelle  -->

.bindPopup('Ouf, on peut partir maintenant qu'on a le ventre plein!')

________________________________________________________________________
19. Disparition de Ilona, puis Ilona dans le bus, apparition de papa Aymeric

.bindPopup('Vous le ratez de peu, il vient de partir pour Oslo!')
OK $message.innerHTML = "Terrible, on va à Oslo! Un avant gout de mon Erasmus !" (Felix qui parle)
OK $message.innerHTML = "J'espère qu'il y aura de la neige, et que le bus sera coincé pour repartir!" (Ilona qui parle)
________________________________________________________________________
20. Disparition de papa Aymeric, apparition de Aymeric

.bindPopup('Oh mais que faites-vous ici? Je pars avec vous si vous devinez ce qu'est un brunost ! <form><label>nom 1<input type="radio" name="ouinon" value="non"></label><label>nom 2<input type="radio" name="ouinon" value="oui"></label><input type="submit" name="envoi" value="OK"></form>')

var valeur = document.querySelector('input[name="ouinon"]:checked').value;
if (valeur == 1){
    .bindPopup('Bravo, c'est un fromage norvégien à pâte brune et au goût caramélisé.')
    .bindPopup('Allons récupérer Maeve, c'est la dernière personne q'uil nous manque ! Elle habite près de Lille!')
    OK $message.innerHTML = "On est obligé d'aller la chercher ?" (Felix qui parle)
    OK $message.innerHTML = "D'ailleurs, on prononce "mève" ou "maève" ?'(Amaury qui parle)
}
else (){
    ///trouver ce qu'on fait si l'utilisateur répond mal : on ouvre un autre popup ? ou on affiche un message a la suite de la popup ?
    OK $message.innerHTML = "Il faut lui donner un indice, non ?" (Melodie qui parle)
    OK $message.innerHTML = "Non, c'est terrible le mignibus ensemble, on pourrait se croire dans le bus du wei !" (Felix qui parle)
}
________________________________________________________________________
21. Disparition de Aymeric, puis Aymeric dans le bus, apparition de Maeve
.bindPopup('Salut! Savez-vous quelle est la bière (pas très bonne certes) fabriquée à côté de Zudausques?<form><label>nom 1<input type="radio" name="ouinon" value="non"></label><label>nom 2<input type="radio" name="ouinon" value="oui"></label><input type="submit" name="envoi" value="OK"></form>')

var valeur = document.querySelector('input[name="ouinon"]:checked').value;
if (valeur == 1){
    .bindPopup('Yes, bien joué! Partons vite, Victor nous attend!')
    OK $message.innerHTML = "On rentre enfin ! " (Kevin qui parle)
    OK $message.innerHTML = "On rentre enfin" (Baptiste qui parle)
    OK $message.innerHTML = "On rentre enfin" (Clement qui parle)

}
else (){
    ///trouver ce qu'on fait si l'utilisateur répond mal : on ouvre un autre popup ? ou on affiche un message a la suite de la popup ?
}

21. Disparition de Maeve, puis Maeve dans le bus, apparition de Victor avec le bus












<tr><th>Position</th><th>Identifiant</th><th>Temps</th></tr>";


<!-- on peut integrer ca lors des differents cas quand les ge s doivent repondre -->
<div id="i1">
<label>reponse1<input type="radio" name="ouinon" value="1"></label>
<label>reponse2<input type="radio" name="ouinon" value="0"></label>
<button id="validate">Valider</button>
</div>

<div id="i2">
<label>reponse1<input type="texte" name="ouinon" id="i2texte" value="0"></label>
<button id="validate2">Valider2</button>
</div>


<!-- <div id="busMouse"></div>
<input type="checkbox" id="option" name="afficheBus">
<label for="afficheBus">Afficher le bus en voyage</label> -->



<?php     
        include("connexion.php");
        if(isset($_POST['commentaireInput'])){
            $sqlilo = "UPDATE joueur SET kai = '$_GET[commentaireInput]' WHERE pseudo ='$_GET[login]'";
            if (mysqli_query($link, $sqlilo)) {
                echo "(sql : update joueur avec message) Nouveau enregistrement créé avec succès";
            } else {
                echo "Erreur message ilona: " . $sqlilo . "<br>" . mysqli_error($link);
            }
        }
        
        echo "<div id=\commentaire\">";
        $tableau_commentaire = [];
        $requete_commentaire = "SELECT pseudo, kai FROM joueur";
        if ($result_commentaire = mysqli_query($link, $requete_commentaire)) {
            while ($ligne_commentaire = mysqli_fetch_assoc($result_commentaire)) {
                array_push($tableau_commentaire, [
                    "pseudo" => $ligne_commentaire['pseudo'],
                    "kai" => $ligne_commentaire['kai']
                ]);
            }

            $table_str = "<table>";

            foreach ($tableau_commentaire as $elem) {
                $table_str .= "<tr><td>";
                foreach ($elem as $key => $value) {
                    $table_str .= "$value";
                }
                $table_str .= "</td></tr>";
            }
            $table_str .= "</table>";
            
            echo $table_str;
        }
        else {
            echo "Erreur de requête de base de données.";
        }
        echo "</div>";
        ?>




// test ilona pour conv - je le fais ici comme j'ai pas acces encore au truc d amelie et ca commence seulement a amelie-
var compteurZ = 0;
var compteurF = 0;
// var contenuMessage = document.getElementById("contenuMessage");
// var photoMessage = document.getElementById("photoMessage");

var message1 = document.getElementById("message");

var afficheMessageBus = function(message, icone) {
    bulleMessage = document.createElement('div');
    bulleMessage.setAttribute("id", "bulleMessage");

    // var bulleMessage = document.createElement('div');
    // contenuMessage.setAttribute("id", "contenuMessage");
    // var new_div = document.createElement('div');
    // new_div.setAttribute("id", "new_div");

    // new_div.style.width= '100%';
    var contenuMessage = document.createElement('div');
    contenuMessage.setAttribute("id", "contenuMessage");
    contenuMessage.innerHTML += message;

    var photoMessage = document.createElement('div');
    photoMessage.setAttribute("id", "photoMessage");
    var img = document.createElement("img");
    img.src = icone;
    img.style.height = '50px';
    photoMessage.appendChild(img);

    bulleMessage.appendChild(contenuMessage);
    bulleMessage.appendChild(photoMessage);
    message1.appendChild(bulleMessage);
    }


testMessage.addEventListener('click', function(){
        var messageBus1 = "bonjour1$bonjour2".split("$");
        var messageBus2 = "Fillon1$Fillon2".split("$");

        if (compteurZ==0){
            // afficheMessageBus(result2["messageBus"].split("$")[0], result2["icone"]);
            afficheMessageBus(messageBus1[0], 'images/zarzelli.jpg');
            afficheMessageBus(messageBus1[0], 'images/zarzelli.jpg');
            afficheMessageBus(messageBus1[0], 'images/zarzelli.jpg');
            afficheMessageBus(messageBus1[0], 'images/zarzelli.jpg');
            afficheMessageBus(messageBus1[0], 'images/zarzelli.jpg');
            afficheMessageBus(messageBus1[0], 'images/zarzelli.jpg');
            compteurZ++;
        }
        else if (compteurF ==0){
            afficheMessageBus(messageBus2[0], 'images/fillon.jpg');
            compteurF++;
        }
        else if (compteurZ == 1){
            afficheMessageBus(messageBus1[1], 'images/zarzelli.jpg');
            afficheMessageBus(messageBus1[1], 'images/zarzelli.jpg');
            afficheMessageBus(messageBus1[1], 'images/zarzelli.jpg');

            compteurZ++;
        }
        // })
    }
);




      <div id="deroulmentJeu">
        <div id="deroulmentTitre">Déroulement du jeu</div>
        <div id="message">
          <?php
            include("connexion.php");
            $today = date("H:i:s"); 
            $sql = "INSERT INTO joueur (pseudo, finchrono, debutchrono) VALUES ('$_GET[login]', '$today', '$today')";
            // if (mysqli_query($link, $sql)) {
            //     echo "(sql) Nouveau enregistrement créé avec succès";
            // } else {
            //     echo "(sql) Erreur : " . $sql . "<br>" . mysqli_error($link);
            // }
            
            echo "<form method=\"get\" action=\"pageFin.php\">
                    <input type=\"readonly\" name=\"login\" value=\"$_GET[login]\" style=\"display:none;\"> 
                    <input type=\"submit\" value=\"OK\" id=\"recup\">
            </form>";
          ?>
        </div>
          <!-- <div id="bulleMessage">
            <div id= 'contenuMessage'></div>
            <div id ='photoMessage'></div>
          </div> -->

          <div id="interaction">
            <input type="text" id="valueReponse" name="valueReponse" required minlength="1" maxlength="20" size="20">
            <button id="suiteStory">Next</button>

            <button id="valide">Entrer</button>
            </br>
            <div id="noValueReponse"></div>

            <button id="testMessage">testMessage</button>
          </div>

        </div>
    </div>



        // if(nbPersonne == 2){
        //     for (i=1; 3; i++){
        //         console.log(paroles[i], imageDialogue[i]);
        //         // afficheMessageBus(paroles[i], imageDialogue[i]);
        //         afficheMessageBus(paroles[i]);
        //         console.log(i);
        //     }
        // }


// PARTIE ILONA
var testMessage = document.getElementById("testMessage");
var message1 = document.getElementById("message");

var afficheMessageBus = function(message, icone) {
    bulleMessage = document.createElement('div');
    bulleMessage.setAttribute("id", "bulleMessage");

    var contenuMessage = document.createElement('div');
    contenuMessage.setAttribute("id", "contenuMessage");
    contenuMessage.innerHTML += message;

    var photoMessage = document.createElement('div');
    photoMessage.setAttribute("id", "photoMessage");
    var img = document.createElement("img");
    img.src = icone;
    img.style.height = '50px';
    photoMessage.appendChild(img);

    bulleMessage.appendChild(contenuMessage);
    bulleMessage.appendChild(photoMessage);
    message1.appendChild(bulleMessage);
}


// function sleep(milliseconds) {
//     const date = Date.now();
//     let currentDate = null;
//     do {
//       currentDate = Date.now();
//     } while (currentDate - date < milliseconds);
//   }

var recupFetchDiscussion = function(nbPersonne, nb) {
    fetch('http://localhost/projetweb/objet.php?conversation='+String(nb))
    .then(response => response.json())
    .then(results => {
        var result = results[0];
        var paroles = result["dialogueBus"].split("$");
        var imageBus = result["imageBus"].split("$");

        if (nbPersonne == 2){
            for (var i=0; i < paroles.length; i++){
                afficheMessageBus(paroles[i], imageBus[i]);
            }
        }
    })
}
